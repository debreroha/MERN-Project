{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { call, all, put, takeEvery } from \"redux-saga/effects\";\nimport { getSongsSuccess, getSongsFailure, addSongSuccess, addSongFailure } from \"../songState/songsState\";\nimport axios from \"axios\";\nconst baseUrl = \"http://localhost:5000/api\";\nexport const getAllSongs = () => {\n  return axios.get(`${baseUrl}/songs`);\n};\nfunction* getSongs() {\n  try {\n    const response = yield call(getAllSongs);\n    const songs = response.data;\n    yield put(getSongsSuccess(songs));\n  } catch (e) {\n    yield put(getSongsFailure(e.message));\n  }\n}\n\n// watcher saga\nexport function* watcherSongSaga() {\n  yield takeEvery(\"songs/getSongsFetch\", getSongs);\n}\n\n//root saga\nexport default function* rootSaga() {\n  yield all([watcherSongSaga()]);\n}\nexport const addSongToApi = newSong => {\n  return axios.post(`${baseUrl}/songs/add`, newSong);\n};\nfunction* addSongSaga(action) {\n  try {\n    const response = yield call(addSongToApi, action.payload);\n    const addedSong = response.data;\n    yield put(addSongSuccess(addedSong));\n  } catch (e) {\n    yield put(addSongFailure(e.message));\n  }\n}\nexport function* watcherAddSongSaga() {\n  yield takeEvery(\"songs/addSongFetch\", addSongSaga);\n}\nexport function* addRootSaga() {\n  yield all([watcherAddSongSaga()]);\n}","map":{"version":3,"names":["call","all","put","takeEvery","getSongsSuccess","getSongsFailure","addSongSuccess","addSongFailure","axios","baseUrl","getAllSongs","get","getSongs","response","songs","data","e","message","watcherSongSaga","rootSaga","addSongToApi","newSong","post","addSongSaga","action","payload","addedSong","watcherAddSongSaga","addRootSaga"],"sources":["D:/MERN Stack/frontend/src/saga/sagas.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\r\nimport { call, all, put, takeEvery } from \"redux-saga/effects\";\r\nimport {\r\n  getSongsSuccess,\r\n  getSongsFailure,\r\n  addSongSuccess,\r\n  addSongFailure\r\n\r\n} from \"../songState/songsState\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport { SongType, SongActionType } from \"../songState/songsState\";\r\nconst baseUrl = \"http://localhost:5000/api\";\r\n\r\nexport const getAllSongs = (): Promise<AxiosResponse<SongType[]>> => {\r\n  return axios.get<SongType[]>(`${baseUrl}/songs`);\r\n};\r\n\r\nfunction* getSongs() {\r\n  try {\r\n    const response: AxiosResponse<SongType[]> = yield call(getAllSongs);\r\n    const songs: SongType[] = response.data;\r\n    yield put(getSongsSuccess(songs));\r\n  } catch (e: any) {\r\n    yield put(getSongsFailure(e.message));\r\n  }\r\n}\r\n\r\n// watcher saga\r\nexport function* watcherSongSaga() {\r\n  yield takeEvery(\"songs/getSongsFetch\", getSongs);\r\n \r\n}\r\n\r\n\r\n//root saga\r\nexport default function* rootSaga() {\r\n  yield all([watcherSongSaga()]);\r\n}\r\n\r\n\r\nexport const addSongToApi = (newSong: SongType): Promise<AxiosResponse<SongType>> => {\r\n  return axios.post<SongType>(`${baseUrl}/songs/add`, newSong);\r\n};\r\n\r\n\r\nfunction* addSongSaga(action: SongActionType) {\r\n  try {\r\n    const response: AxiosResponse<SongType> = yield call(addSongToApi, action.payload);\r\n    const addedSong: SongType = response.data;\r\n    yield put(addSongSuccess(addedSong));\r\n  } catch (e: any) {\r\n    yield put(addSongFailure(e.message));\r\n  }\r\n}\r\n\r\nexport function* watcherAddSongSaga() {\r\n  yield takeEvery(\"songs/addSongFetch\", addSongSaga);\r\n \r\n}\r\n\r\nexport  function* addRootSaga() {\r\n  yield all([watcherAddSongSaga()]);\r\n}\r\n\r\n\r\n"],"mappings":"AAAA;;AAEA,SAASA,IAAI,EAAEC,GAAG,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AAC9D,SACEC,eAAe,EACfC,eAAe,EACfC,cAAc,EACdC,cAAc,QAET,yBAAyB;AAChC,OAAOC,KAAK,MAAyB,OAAO;AAE5C,MAAMC,OAAO,GAAG,2BAA2B;AAE3C,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAA0C;EACnE,OAAOF,KAAK,CAACG,GAAG,CAAc,GAAEF,OAAQ,QAAO,CAAC;AAClD,CAAC;AAED,UAAUG,QAAQA,CAAA,EAAG;EACnB,IAAI;IACF,MAAMC,QAAmC,GAAG,MAAMb,IAAI,CAACU,WAAW,CAAC;IACnE,MAAMI,KAAiB,GAAGD,QAAQ,CAACE,IAAI;IACvC,MAAMb,GAAG,CAACE,eAAe,CAACU,KAAK,CAAC,CAAC;EACnC,CAAC,CAAC,OAAOE,CAAM,EAAE;IACf,MAAMd,GAAG,CAACG,eAAe,CAACW,CAAC,CAACC,OAAO,CAAC,CAAC;EACvC;AACF;;AAEA;AACA,OAAO,UAAUC,eAAeA,CAAA,EAAG;EACjC,MAAMf,SAAS,CAAC,qBAAqB,EAAES,QAAQ,CAAC;AAElD;;AAGA;AACA,eAAe,UAAUO,QAAQA,CAAA,EAAG;EAClC,MAAMlB,GAAG,CAAC,CAACiB,eAAe,CAAC,CAAC,CAAC,CAAC;AAChC;AAGA,OAAO,MAAME,YAAY,GAAIC,OAAiB,IAAuC;EACnF,OAAOb,KAAK,CAACc,IAAI,CAAY,GAAEb,OAAQ,YAAW,EAAEY,OAAO,CAAC;AAC9D,CAAC;AAGD,UAAUE,WAAWA,CAACC,MAAsB,EAAE;EAC5C,IAAI;IACF,MAAMX,QAAiC,GAAG,MAAMb,IAAI,CAACoB,YAAY,EAAEI,MAAM,CAACC,OAAO,CAAC;IAClF,MAAMC,SAAmB,GAAGb,QAAQ,CAACE,IAAI;IACzC,MAAMb,GAAG,CAACI,cAAc,CAACoB,SAAS,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOV,CAAM,EAAE;IACf,MAAMd,GAAG,CAACK,cAAc,CAACS,CAAC,CAACC,OAAO,CAAC,CAAC;EACtC;AACF;AAEA,OAAO,UAAUU,kBAAkBA,CAAA,EAAG;EACpC,MAAMxB,SAAS,CAAC,oBAAoB,EAAEoB,WAAW,CAAC;AAEpD;AAEA,OAAQ,UAAUK,WAAWA,CAAA,EAAG;EAC9B,MAAM3B,GAAG,CAAC,CAAC0B,kBAAkB,CAAC,CAAC,CAAC,CAAC;AACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}